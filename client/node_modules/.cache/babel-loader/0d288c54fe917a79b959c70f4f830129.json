{"ast":null,"code":"var _jsxFileName = \"/Users/debanikpurkayastha/Desktop/corona-aid/client/src/App.js\";\nimport React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\nimport Offers from './Offers';\nimport YourOffer from './YourOffer';\nimport Login from './Login';\nimport Register from './Register';\nimport HelpfulLinks from './HelpfulLinks';\nimport fetch_a from './util/fetch_auth';\nimport Container from 'react-bootstrap/Container';\nimport Tabs from 'react-bootstrap/Tabs';\nimport Tab from 'react-bootstrap/Tab';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Nav from 'react-bootstrap/Nav';\nimport NavDropdown from 'react-bootstrap/NavDropdown';\nimport Form from 'react-bootstrap/Form';\nimport FormControl from 'react-bootstrap/FormControl';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport Spinner from 'react-bootstrap/Spinner';\nimport Geocode from \"react-geocode\";\nimport Cookie from 'js-cookie';\n\nclass App extends Component {\n  constructor() {\n    super();\n    this.state = {\n      latitude: '',\n      longitude: '',\n      isLoaded: false,\n      isLoggedIn: false,\n      first_name: '',\n      last_name: '',\n      currentUser: undefined,\n      currentUserAvailability: false,\n      checked: false,\n      showLogin: false,\n      showRegistration: false,\n      currentZipCode: '',\n      currentNeighborhood: ''\n    };\n    this.getMyLocation = this.getMyLocation.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.logout = this.logout.bind(this);\n    this.handleShowLogin = this.handleShowLogin.bind(this);\n    this.handleHideLogin = this.handleHideLogin.bind(this);\n    this.handleShowRegistration = this.handleShowRegistration.bind(this);\n    this.handleHideRegistration = this.handleHideRegistration.bind(this);\n    this.setLatLongFromZip = this.setLatLongFromZip.bind(this);\n  }\n\n  handleShowLogin() {\n    this.setState({\n      showLogin: true\n    });\n  }\n\n  handleHideLogin() {\n    this.setState({\n      showLogin: false\n    });\n  }\n\n  handleShowRegistration() {\n    this.setState({\n      showRegistration: true\n    });\n  }\n\n  handleHideRegistration() {\n    this.setState({\n      showRegistration: false\n    });\n  }\n\n  componentDidMount() {\n    this.getMyLocation();\n\n    if (Cookie.get(\"token\")) {\n      this.fetchUser();\n    }\n  }\n\n  fetchUser() {\n    fetch_a('/api/users/current').then(response => response.json()).then(user => {\n      this.setState({\n        checked: user.availability\n      });\n      this.setState({\n        isLoggedIn: true\n      });\n      this.setState({\n        first_name: user.first_name\n      });\n      this.setState({\n        last_name: user.last_name\n      });\n    }).catch(error => {\n      console.error(error);\n    });\n  }\n\n  handleChange(checked) {\n    let form = {\n      'availability': checked\n    };\n    this.setState({\n      checked: checked\n    });\n    fetch_a('/api/users/update/', {\n      method: 'put',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(form)\n    }).then(response => {\n      if (response.ok) {\n        this.setState({\n          checked: checked\n        });\n        console.log(\"Update successful\");\n      } else {\n        console.log(\"Update not successful\");\n      }\n    }).catch(e => {\n      console.log(\"Error\");\n    });\n  }\n\n  getMyLocation() {\n    var lat = '';\n    var long = '';\n\n    if (Cookie.get('latitude') && Cookie.get('longitude')) {\n      lat = Cookie.get('latitude');\n      long = Cookie.get('longitude');\n      this.findAndSetNeighborhood(lat, long);\n      this.setState({\n        latitude: Cookie.get('latitude'),\n        longitude: Cookie.get('longitude')\n      });\n    }\n\n    const location = window.navigator && window.navigator.geolocation;\n\n    if (location) {\n      location.getCurrentPosition(position => {\n        Cookie.set('latitude', position.coords.latitude);\n        Cookie.set('longitude', position.coords.longitude);\n        this.setState({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        });\n        lat = position.coords.latitude;\n        long = position.coords.longitude;\n        this.findAndSetNeighborhood(lat, long);\n      }, error => {\n        this.setState({\n          latitude: 'err-latitude',\n          longitude: 'err-longitude'\n        });\n      });\n    }\n  }\n\n  logout() {\n    Cookie.remove('token');\n    window.location.reload(false);\n  }\n\n  findAndSetNeighborhood(lat, long) {\n    Geocode.fromLatLng(lat, long).then(response => {\n      var foundNeighborhood = '';\n\n      for (var i = 0; i < Math.min(4, response.results.length); i++) {\n        const results = response.results[i]['address_components'];\n\n        for (var j = 0; j < results.length; j++) {\n          const types = results[j].types;\n\n          if (types.includes('neighborhood') || types.includes('locality')) {\n            const currNeighborhoodName = results[j]['long_name'];\n\n            if (foundNeighborhood == '') {\n              foundNeighborhood = currNeighborhoodName;\n            }\n          }\n        }\n      }\n\n      this.setState({\n        isLoaded: true,\n        currentNeighborhood: foundNeighborhood\n      });\n    }, error => {\n      console.error(error);\n    });\n  }\n\n  setLatLongFromZip() {\n    Geocode.fromAddress(this.state.currentZipCode).then(response => {\n      const {\n        lat,\n        lng\n      } = response.results[0].geometry.location;\n      this.findAndSetNeighborhood(response);\n      Cookie.set('latitude', lat);\n      Cookie.set('longitude', lng);\n      this.setState({\n        isLoaded: true,\n        latitude: lat,\n        longitude: lng\n      });\n    }, error => {\n      console.error(error);\n    });\n  }\n\n  handleChangeZip(value) {\n    this.setState({\n      currentZipCode: value\n    });\n  }\n\n  isNumeric(value) {\n    return /^-{0,1}\\d+$/.test(value);\n  }\n\n  validateForm() {\n    if (this.state.currentZipCode.length != 5) {\n      return false;\n    }\n\n    return this.isNumeric(this.state.currentZipCode);\n  }\n\n  render() {\n    const {\n      isLoaded\n    } = this.state;\n    const {\n      isLoggedIn\n    } = this.state;\n    var rightNav;\n    var yourOffer;\n    var toggleSwitch;\n\n    if (isLoggedIn) {\n      rightNav = React.createElement(React.Fragment, null, React.createElement(Nav, {\n        className: \"mr-sm-2\",\n        style: {\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 19\n        }\n      }, \"Hello, \", this.state.first_name), React.createElement(Button, {\n        className: \"mr-sm-2\",\n        onClick: this.logout,\n        variant: \"danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 19\n        }\n      }, \"Logout\"));\n      yourOffer = React.createElement(Tab, {\n        eventKey: \"your-offer\",\n        title: \"Your Offer\",\n        className: \"tabColor\",\n        id: \"bootstrap-overide\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 19\n        }\n      }, React.createElement(YourOffer, {\n        state: this.state,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }\n      }));\n      toggleSwitch = React.createElement(React.Fragment, null);\n    } else {\n      rightNav = React.createElement(React.Fragment, null, React.createElement(Button, {\n        onClick: this.handleShowLogin,\n        variant: \"success\",\n        className: \"mr-sm-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 20\n        }\n      }, \"Sign In\"), React.createElement(Button, {\n        onClick: this.handleShowRegistration,\n        variant: \"success\",\n        className: \"mr-sm-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 19\n        }\n      }, \"Get Started\"));\n      yourOffer = React.createElement(React.Fragment, null);\n      toggleSwitch = React.createElement(React.Fragment, null);\n    }\n\n    if (!isLoaded) {\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 9\n        }\n      }, React.createElement(Container, {\n        style: {\n          padding: '40px 15px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }\n      }, React.createElement(\"div\", {\n        className: \"p-3 mb-5 bg-white\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 15\n        }\n      }, React.createElement(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        style: {\n          marginBottom: 50\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 19\n        }\n      }, React.createElement(\"span\", {\n        className: \"sr-only\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 21\n        }\n      }, \"Loading...\")), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 19\n        }\n      }), React.createElement(\"h3\", {\n        style: {\n          fontWeight: 300\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 19\n        }\n      }, \"Enter Zip Code if not Redirected\"), React.createElement(Row, {\n        className: \"justify-content-md-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 19\n        }\n      }, React.createElement(Col, {\n        md: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 21\n        }\n      }), React.createElement(Col, {\n        md: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 21\n        }\n      }, React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 23\n        }\n      }, React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 25\n        }\n      }), React.createElement(FormControl, {\n        type: \"text\",\n        value: this.state.currentZipCode,\n        onChange: event => {\n          this.handleChangeZip(event.target.value);\n        },\n        placeholder: \"Zip Code\",\n        className: \"mr-sm-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 25\n        }\n      }), React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 25\n        }\n      }), React.createElement(Button, {\n        variant: \"outline-success\",\n        disabled: !this.validateForm(),\n        onClick: this.setLatLongFromZip,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 25\n        }\n      }, \"Enter\"))), React.createElement(Col, {\n        md: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 21\n        }\n      })))));\n    } else {\n      return React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 9\n        }\n      }, React.createElement(\"link\", {\n        rel: \"stylesheet\",\n        href: \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }\n      }), React.createElement(\"div\", {\n        className: \"BottomHalf\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }\n      }), React.createElement(\"div\", {\n        className: \"App\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 11\n        }\n      }, React.createElement(Navbar, {\n        variant: \"light\",\n        expand: \"lg\",\n        className: \"customNav\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }\n      }, React.createElement(Navbar.Brand, {\n        href: \"#home\",\n        style: {\n          color: 'white',\n          fontWeight: 800,\n          marginLeft: 140\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 15\n        }\n      }, \"Cov-Aid\"), React.createElement(Navbar.Toggle, {\n        \"aria-controls\": \"basic-navbar-nav\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 15\n        }\n      }), React.createElement(Navbar.Collapse, {\n        id: \"basic-navbar-nav\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 15\n        }\n      }, React.createElement(Nav, {\n        className: \"mr-auto\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 17\n        }\n      }, React.createElement(Nav.Link, {\n        href: \"#link\",\n        style: {\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 19\n        }\n      }, \"About Us (Under Construction)\"), React.createElement(NavDropdown, {\n        alignRight: true,\n        title: \"Any issues?\",\n        id: \"basic-nav-dropdown\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 19\n        }\n      }, React.createElement(NavDropdown.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 21\n        }\n      }, \"Email: debanik1997@gmail.com\"), React.createElement(NavDropdown.Item, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 21\n        }\n      }, \"Call/Text: 4846249881\"))), React.createElement(Form, {\n        inline: true,\n        style: {\n          marginRight: 140\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 17\n        }\n      }, rightNav))), React.createElement(Container, {\n        style: {\n          padding: '40px 15px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 13\n        }\n      }, React.createElement(\"h5\", {\n        style: {\n          fontWeight: 300,\n          fontStyle: 'italic',\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 15\n        }\n      }, \"Need a hand?\"), React.createElement(\"h1\", {\n        style: {\n          fontWeight: 800,\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 15\n        }\n      }, \"Mutual Aid For COVID-19\"), React.createElement(\"h6\", {\n        style: {\n          fontWeight: 300,\n          color: 'white'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 15\n        }\n      }, React.createElement(\"i\", {\n        style: {\n          color: \"red\",\n          fontSize: 20,\n          marginRight: 5\n        },\n        class: \"fa fa-map-marker\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 63\n        }\n      }), \" \", this.state.currentNeighborhood), toggleSwitch, React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 15\n        }\n      }), React.createElement(Row, {\n        className: \"justify-content-md-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 15\n        }\n      }, React.createElement(Col, {\n        md: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 17\n        }\n      }), React.createElement(Col, {\n        md: 8,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 17\n        }\n      }, React.createElement(Tabs, {\n        defaultActiveKey: \"offers\",\n        id: \"uncontrolled-tab-example\",\n        className: \"justify-content-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 19\n        }\n      }, React.createElement(Tab, {\n        eventKey: \"offers\",\n        title: \"Offers\",\n        id: \"bootstrap-overide\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 21\n        }\n      }, React.createElement(Offers, {\n        state: this.state,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 23\n        }\n      })), yourOffer, React.createElement(Tab, {\n        eventKey: \"links\",\n        title: \"Helpful Links\",\n        id: \"bootstrap-overide\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 21\n        }\n      }, React.createElement(HelpfulLinks, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 23\n        }\n      })))), React.createElement(Col, {\n        md: 1,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 17\n        }\n      }))), React.createElement(Modal, {\n        show: this.state.showLogin,\n        onHide: this.handleHideLogin,\n        style: {\n          marginTop: 60\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 13\n        }\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 19\n        }\n      }, React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 19\n        }\n      }, \"Sign in to Cov-Aid\")), React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 19\n        }\n      }, React.createElement(Login, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 23\n        }\n      }))), React.createElement(Modal, {\n        show: this.state.showRegistration,\n        onHide: this.handleHideRegistration,\n        style: {\n          marginTop: 60\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 15\n        }\n      }, React.createElement(Modal.Header, {\n        closeButton: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 19\n        }\n      }, React.createElement(Modal.Title, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 19\n        }\n      }, \"Get Started\")), React.createElement(Modal.Body, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 19\n        }\n      }, React.createElement(Register, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 21\n        }\n      })))));\n    }\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/debanikpurkayastha/Desktop/corona-aid/client/src/App.js"],"names":["React","Component","Offers","YourOffer","Login","Register","HelpfulLinks","fetch_a","Container","Tabs","Tab","Row","Col","Navbar","Nav","NavDropdown","Form","FormControl","Button","Modal","Spinner","Geocode","Cookie","App","constructor","state","latitude","longitude","isLoaded","isLoggedIn","first_name","last_name","currentUser","undefined","currentUserAvailability","checked","showLogin","showRegistration","currentZipCode","currentNeighborhood","getMyLocation","bind","handleChange","logout","handleShowLogin","handleHideLogin","handleShowRegistration","handleHideRegistration","setLatLongFromZip","setState","componentDidMount","get","fetchUser","then","response","json","user","availability","catch","error","console","form","method","headers","body","JSON","stringify","ok","log","e","lat","long","findAndSetNeighborhood","location","window","navigator","geolocation","getCurrentPosition","position","set","coords","remove","reload","fromLatLng","foundNeighborhood","i","Math","min","results","length","j","types","includes","currNeighborhoodName","fromAddress","lng","geometry","handleChangeZip","value","isNumeric","test","validateForm","render","rightNav","yourOffer","toggleSwitch","color","padding","marginBottom","fontWeight","event","target","marginLeft","marginRight","fontStyle","fontSize","marginTop"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nimport './App.css'\nimport Offers from './Offers';\nimport YourOffer from './YourOffer';\nimport Login from './Login';\nimport Register from './Register';\nimport HelpfulLinks from './HelpfulLinks';\n\nimport fetch_a from './util/fetch_auth';\n\nimport Container from 'react-bootstrap/Container';\nimport Tabs from 'react-bootstrap/Tabs'\nimport Tab from 'react-bootstrap/Tab'\nimport Row from 'react-bootstrap/Row'\nimport Col from 'react-bootstrap/Col'\nimport Navbar from 'react-bootstrap/Navbar'\nimport Nav from 'react-bootstrap/Nav'\nimport NavDropdown from 'react-bootstrap/NavDropdown'\nimport Form from 'react-bootstrap/Form'\nimport FormControl from 'react-bootstrap/FormControl'\nimport Button from 'react-bootstrap/Button'\nimport Modal from 'react-bootstrap/Modal'\nimport Spinner from 'react-bootstrap/Spinner'\nimport Geocode from \"react-geocode\";\nimport Cookie from 'js-cookie'\n\n\nclass App extends Component {\n  constructor() {\n    super()\n\n    this.state = {\n      latitude: '',\n      longitude: '',\n      isLoaded: false,\n      isLoggedIn: false,\n      first_name: '',\n      last_name: '',\n      currentUser: undefined,\n      currentUserAvailability: false,\n      checked: false,\n      showLogin: false,\n      showRegistration: false,\n      currentZipCode: '',\n      currentNeighborhood: ''\n    }\n\n    this.getMyLocation = this.getMyLocation.bind(this)\n    this.handleChange = this.handleChange.bind(this);\n    this.logout = this.logout.bind(this);\n    this.handleShowLogin = this.handleShowLogin.bind(this);\n    this.handleHideLogin = this.handleHideLogin.bind(this);\n    this.handleShowRegistration = this.handleShowRegistration.bind(this);\n    this.handleHideRegistration = this.handleHideRegistration.bind(this);\n    this.setLatLongFromZip = this.setLatLongFromZip.bind(this);\n  }\n\n  handleShowLogin() {\n    this.setState({showLogin: true});\n  }\n\n  handleHideLogin() {\n    this.setState({showLogin: false})\n  }\n\n  handleShowRegistration() {\n    this.setState({showRegistration: true});\n  }\n\n  handleHideRegistration() {\n    this.setState({showRegistration: false});\n  }\n\n  componentDidMount() {\n    this.getMyLocation();\n    if (Cookie.get(\"token\")) {\n      this.fetchUser()\n    }\n  }\n\n  fetchUser(){\n    fetch_a('/api/users/current')\n        .then((response) => response.json())\n        .then((user) => {\n          this.setState({ checked: user.availability });\n          this.setState({isLoggedIn: true});\n          this.setState({first_name: user.first_name});\n          this.setState({last_name: user.last_name});\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n  }\n\n  handleChange(checked) {\n    let form = {\n      'availability': checked\n    };\n    this.setState({checked : checked});\n\n    fetch_a('/api/users/update/', {\n      method: 'put',\n      headers: {'Content-Type': 'application/json'},\n      body: JSON.stringify(form)\n    })\n    .then((response) => {\n        if (response.ok) {\n          this.setState({checked : checked});\n          console.log(\"Update successful\")\n        } else {\n          console.log(\"Update not successful\")\n        }\n    })\n    .catch((e) => {\n        console.log(\"Error\")\n    });\n  }\n\n  getMyLocation() {\n    var lat = '';\n    var long = '';\n    if (Cookie.get('latitude') && Cookie.get('longitude')) {\n      lat = Cookie.get('latitude');\n      long = Cookie.get('longitude');\n      this.findAndSetNeighborhood(lat, long);\n      this.setState({\n        latitude: Cookie.get('latitude'),\n        longitude: Cookie.get('longitude')\n      })\n    }\n    const location = window.navigator && window.navigator.geolocation\n    if (location) {\n      location.getCurrentPosition((position) => {\n        Cookie.set('latitude', position.coords.latitude);\n        Cookie.set('longitude', position.coords.longitude);\n        this.setState({\n          latitude: position.coords.latitude,\n          longitude: position.coords.longitude\n        });\n        lat = position.coords.latitude;\n        long = position.coords.longitude;\n        this.findAndSetNeighborhood(lat, long);\n      }, (error) => {\n        this.setState({ latitude: 'err-latitude', longitude: 'err-longitude' })\n      })\n    }\n  }\n\n  logout() {\n    Cookie.remove('token');\n    window.location.reload(false);\n  }\n\n  findAndSetNeighborhood(lat, long) {\n    Geocode.fromLatLng(lat, long).then(\n      response => {\n        var foundNeighborhood = '';\n        for (var i = 0; i < Math.min(4, response.results.length); i++) {\n          const results = response.results[i]['address_components'];\n          for (var j = 0; j < results.length; j++) {\n            const types = results[j].types;\n            if (types.includes('neighborhood') || types.includes('locality')) {\n              const currNeighborhoodName = results[j]['long_name'];\n              if (foundNeighborhood == '') {\n                foundNeighborhood = currNeighborhoodName;\n              }\n            }\n          }\n        }\n        this.setState({\n          isLoaded: true,\n          currentNeighborhood: foundNeighborhood\n        });\n      },\n      error => {\n        console.error(error);\n      }\n    );\n\n  }\n\n  setLatLongFromZip() {\n    Geocode.fromAddress(this.state.currentZipCode).then(\n      response => {\n        const { lat, lng } = response.results[0].geometry.location;\n        this.findAndSetNeighborhood(response);\n        Cookie.set('latitude', lat);\n        Cookie.set('longitude', lng);\n        this.setState({\n          isLoaded: true,\n          latitude: lat,\n          longitude: lng,\n        });\n      },\n      error => {\n        console.error(error);\n      }\n    );\n  }\n\n  handleChangeZip(value) {\n    this.setState({currentZipCode: value});\n  }\n\n  isNumeric(value) {\n    return /^-{0,1}\\d+$/.test(value);\n  }\n\n  validateForm() {\n    if (this.state.currentZipCode.length != 5) {\n      return false;\n    }\n    return this.isNumeric(this.state.currentZipCode);\n  }\n\n  render() {\n    const { isLoaded } = this.state;\n    const { isLoggedIn } = this.state;\n\n    var rightNav;\n    var yourOffer;\n    var toggleSwitch;\n    if (isLoggedIn) {\n      rightNav = <>\n                  <Nav className=\"mr-sm-2\" style ={{color: 'white'}}>\n                    Hello, {this.state.first_name}\n                  </Nav>\n                  <Button className=\"mr-sm-2\" onClick={this.logout} variant=\"danger\">\n                    Logout\n                  </Button>\n                </>;\n      yourOffer = <Tab eventKey=\"your-offer\" title=\"Your Offer\" className=\"tabColor\" id='bootstrap-overide'>\n                    <YourOffer state = {this.state}/>\n                  </Tab>;\n      toggleSwitch = <>\n              </>;       \n    } else {\n      rightNav = <>\n                   <Button \n                    onClick={this.handleShowLogin}\n                    variant=\"success\"\n                    className=\"mr-sm-2\">\n                    Sign In\n                  </Button>\n\n                  <Button \n                    onClick={this.handleShowRegistration} \n                    variant=\"success\"\n                    className=\"mr-sm-2\">\n                    Get Started\n                  </Button>\n                </>;\n      yourOffer = <></>\n      toggleSwitch = <></>\n    }\n\n    if (!isLoaded) {\n      return (\n        <div className=\"App\">\n          <Container style = {{padding: '40px 15px'}}>\n              <div className=\"p-3 mb-5 bg-white\">\n                  <Spinner animation=\"border\" role=\"status\" style = {{marginBottom: 50}}>\n                    <span className=\"sr-only\">Loading...</span>\n                  </Spinner>\n                  <br></br>\n                  <h3 style = {{fontWeight: 300}}>Enter Zip Code if not Redirected</h3>\n                  <Row className=\"justify-content-md-center\">\n                    <Col md={5}></Col>\n                    <Col md={2}>\n                      <Form>\n                        <br></br>\n                        <FormControl type=\"text\" \n                                      value={this.state.currentZipCode} \n                                      onChange={(event) => {this.handleChangeZip(event.target.value)}} \n                                      placeholder=\"Zip Code\" \n                                      className=\"mr-sm-2\" />\n                        <br></br>\n                        <Button variant=\"outline-success\" disabled={!this.validateForm()} onClick = {this.setLatLongFromZip}>Enter</Button>\n                      </Form>\n                    </Col>\n\n                    <Col md={5}></Col>\n                  </Row>\n                </div>\n              </Container>\n          </div>)\n    } else {\n      return (\n        <div>\n          <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\"></link>\n          <div className=\"BottomHalf\"></div>\n          <div className=\"App\">\n            <Navbar variant=\"light\" expand=\"lg\" className = 'customNav'>\n              <Navbar.Brand href=\"#home\" style ={{color: 'white', fontWeight: 800, marginLeft: 140}}>Cov-Aid</Navbar.Brand>\n              <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n              <Navbar.Collapse id=\"basic-navbar-nav\">\n                <Nav className=\"mr-auto\">\n                  <Nav.Link href=\"#link\" style ={{color: 'white'}}>About Us (Under Construction)</Nav.Link>\n                  <NavDropdown alignRight title=\"Any issues?\" id=\"basic-nav-dropdown\">\n                    <NavDropdown.Item>\n                      Email: debanik1997@gmail.com\n                    </NavDropdown.Item>\n                    <NavDropdown.Item>\n                      Call/Text: 4846249881\n                    </NavDropdown.Item>\n                  </NavDropdown>\n                </Nav>\n                <Form inline style ={{marginRight: 140}}>\n                  {rightNav}\n                </Form>\n              </Navbar.Collapse>\n            </Navbar>\n\n\n            <Container style = {{padding: '40px 15px'}}>\n              <h5 style = {{fontWeight: 300, fontStyle: 'italic', color: 'white'}}>Need a hand?</h5>\n              <h1 style = {{fontWeight: 800, color: 'white'}}>Mutual Aid For COVID-19</h1>\n              <h6 style = {{fontWeight: 300, color: 'white'}}><i style={{color: \"red\", fontSize: 20, marginRight: 5}} class=\"fa fa-map-marker\"></i> {this.state.currentNeighborhood}</h6>\n\n              {toggleSwitch}\n              <br />\n\n              <Row className=\"justify-content-md-center\">\n                <Col md={1}></Col>\n                <Col md={8}>\n                  <Tabs defaultActiveKey=\"offers\" id=\"uncontrolled-tab-example\" className=\"justify-content-center\">\n                    <Tab eventKey=\"offers\" title=\"Offers\" id='bootstrap-overide'>\n                      <Offers state = {this.state}/>\n                    </Tab>\n                    {yourOffer}\n                    <Tab eventKey=\"links\" title=\"Helpful Links\" id='bootstrap-overide'>\n                      <HelpfulLinks />\n                    </Tab>\n                  </Tabs>\n                </Col>\n\n                <Col md={1}></Col>\n              </Row>\n            </Container>\n            <Modal show={this.state.showLogin} onHide={this.handleHideLogin} style = {{marginTop: 60}}>\n                  <Modal.Header closeButton>\n                  <Modal.Title>Sign in to Cov-Aid</Modal.Title>\n                  </Modal.Header>\n                  <Modal.Body>\n                      <Login />\n                  </Modal.Body>\n              </Modal>\n              <Modal show={this.state.showRegistration} onHide={this.handleHideRegistration} style = {{marginTop: 60}}>\n                  <Modal.Header closeButton>\n                  <Modal.Title>Get Started</Modal.Title>\n                  </Modal.Header>\n                  <Modal.Body>\n                    <Register />\n                  </Modal.Body>\n              </Modal>\n          </div>\n        </div>\n      );\n    }\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}